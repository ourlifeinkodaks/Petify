window.Modernizr=function(a,b,c){function d(a){n.cssText=a}function f(a,b){return typeof a===b}var o,x,z,i="2.7.1",j={},k=b.documentElement,l="modernizr",m=b.createElement(l),n=m.style,q=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),r={svg:"http://www.w3.org/2000/svg"},s={},v=[],w=v.slice,y={}.hasOwnProperty;z=f(y,"undefined")||f(y.call,"undefined")?function(a,b){return b in a&&f(a.constructor.prototype[b],"undefined")}:function(a,b){return y.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=w.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(w.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(w.call(arguments)))};return d}),s.inlinesvg=function(){var a=b.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==r.svg};for(var A in s)z(s,A)&&(x=A.toLowerCase(),j[x]=s[A](),v.push((j[x]?"":"no-")+x));return j.addTest=function(a,b){if("object"==typeof a)for(var d in a)z(a,d)&&j.addTest(d,a[d]);else{if(a=a.toLowerCase(),j[a]!==c)return j;b="function"==typeof b?b():b,"undefined"!=typeof enableClasses&&enableClasses&&(k.className+=" "+(b?"":"no-")+a),j[a]=b}return j},d(""),m=o=null,j._version=i,j._prefixes=q,j}(this,this.document),Modernizr.addTest("cssfilters",function(){var a=document.createElement("div");return a.style.cssText=Modernizr._prefixes.join("filter:blur(2px); "),!!a.style.length&&(void 0===document.documentMode||document.documentMode>9)}),Modernizr.addTest("svgfilters",function(){var a=!1;try{a=void 0!==typeof SVGFEColorMatrixElement&&2==SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE}catch(b){}return a}),function(a,b){function g(b,c){c=c||{},c.classes=c.classes||{},fadeClass=c.classes.fade||f.classes.fade,c.fade=c.fade||b.className.indexOf(fadeClass)>-1,this.element=b,this.settings=a.extend({},f,c),this._defaults=f,this._name=e,this.init()}var e="gray",f={fade:!1,classes:{fade:"grayscale-fade"}};g.prototype={init:function(){!Modernizr.cssfilters&&Modernizr.inlinesvg&&Modernizr.svgfilters&&(element=a(this.element),(this.cssFilterDeprecated(element)||this.settings.fade)&&this.switchImage(element))},cssFilterDeprecated:function(a){return"none"===a.css("filter")},elementType:function(a){var b;return b="IMG"===a.prop("tagName")?"Img":"Bg"},getComputedStyle:function(a){var c={},d={};c=b.getComputedStyle(a,null);for(var e=0,f=c.length;f>e;e++){var g=c[e],h=c.getPropertyValue(g);d[g]=h}return d},extractUrl:function(a){var b;return startRegex=/^url\(["']?/,endRegex=/["']?\)$/,b=a.replace(startRegex,"").replace(endRegex,"")},positionToNegativeMargin:function(a){var b,c,d;return b=a.match(/^(-?\d+\S+)/)[0],c=a.match(/\s(-?\d+\S+)$/)[0],d="margin:"+c+" 0 0 "+b},getBgSize:function(b,c){var d,e,f,g,h,i,j;if(d=new Image,d.src=b,"auto"!==c&&"cover"!==c&&"contain"!==c&&"inherit"!==c){var k=a(this.element);e=d.width/d.height,g=parseInt((c.match(/^(\d+)px/)||[0,0])[1]),i=parseInt((c.match(/\s(\d+)px$/)||[0,0])[1]),f=k.height()*e,h=k.width()/e,g=g||f,i=i||h}return j=g||i?{width:g,height:i}:{width:d.width,height:d.height}},getParams:function(a){var b=this.elementType(a);return this["get"+b+"Params"](a)},getImgParams:function(a){var b={};return b.styles=this.getComputedStyle(a[0]),b.svg={url:a[0].src,width:b.styles.width.replace("px",""),height:b.styles.height.replace("px",""),offset:""},b},getBgParams:function(b){var d,c={};return d=this.extractUrl(b.css("background-image")),bgSize=this.getBgSize(d,b.css("background-size")),offset=this.positionToNegativeMargin(b.css("background-position")),c.styles=this.getComputedStyle(b[0]),c.svg=a.extend({url:d},bgSize,{offset:offset}),c},setFadeStyles:function(a,b){return a["background-image"]='url("'+b+'")',delete a.filter,a},switchImage:function(b){var c,d,e;c=this.getParams(b),d=this.settings.fade?this.settings.classes.fade:"",e=a('<div class="grayscale-replaced '+d+'">'+'<svg xmlns="http://www.w3.org/2000/svg" id="svgroot" viewBox="0 0 '+c.svg.width+" "+c.svg.height+'" width="'+c.svg.width+'" height="'+c.svg.height+'" style="'+c.svg.offset+'">'+"<defs>"+'<filter id="gray">'+'<feColorMatrix type="matrix" values="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0" />'+"</filter>"+"</defs>"+'<image filter="url(&quot;#gray&quot;)" x="0" y="0" width="'+c.svg.width+'" height="'+c.svg.height+'" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+c.svg.url+'" />'+"</svg>"+"</div>"),c.styles.display="inline-block",c.styles.overflow=c.styles["overflow-x"]=c.styles["overflow-y"]="hidden",this.settings.fade&&(c.styles=this.setFadeStyles(c.styles,c.svg.url)),e.css(c.styles),b.replaceWith(e)}},a.fn[e]=function(b){return this.each(function(){a.data(this,"plugin_"+e)||a.data(this,"plugin_"+e,new g(this,b))}),this},a(b).on("load",function(){a(".grayscale")[e]()})}(jQuery,window,document);